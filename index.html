<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber Glitch Configurator</title>
  <link rel="stylesheet" href="src/styles/config.css">
</head>
<body>

  <!-- Sidebar -->
  <aside class="config-panel">
    <div class="panel-header">
      <h1><span class="panel-header-icon">â–</span> Cyber Config</h1>
    </div>
    
    <div class="panel-content">
      
      <!-- Section 1: Content -->
      <div class="section">
        <div class="section-title"><span>Content</span></div>
        
        <div class="form-group">
          <label>å…¬å‘Šå†…å®¹ Announcement</label>
          <textarea id="input-announcement" class="form-control" spellcheck="false"></textarea>
        </div>

        <div class="form-group">
            <label>
                æ»šåŠ¨é€Ÿåº¦ Speed 
                <span class="form-value-label" id="val-speed">25s</span>
            </label>
            <input type="range" id="input-speed" min="5" max="60" step="1">
        </div>

        <div class="form-group">
          <label id="label-game">æ¸¸æˆå Game</label>
          <input type="text" id="input-game" class="form-control">
        </div>
      </div>

      <!-- Section 2: Layout -->
      <div class="section">
        <div class="section-title"><span>Layout</span></div>
        
        <div class="form-group">
            <label>å¸ƒå±€æ¨¡å¼ Mode</label>
            <select id="input-ratio" class="form-control">
                <option value="chat">ğŸ’¬ æ‚è°ˆ (Chat Mode)</option>
                <option value="21:9">ğŸ“º 21:9 Ultrawide</option>
                <option value="16:9">ğŸ–¥ï¸ 16:9 Standard</option>
            </select>
        </div>

        <div class="toggle-group">
            <div class="toggle-row">
                <span class="toggle-label">ğŸµ éŸ³ä¹ Music</span>
                <label class="switch">
                    <input type="checkbox" id="input-music">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="toggle-row">
                <span class="toggle-label">ğŸ  ä¸»é¡µ Homepage</span>
                <label class="switch">
                    <input type="checkbox" id="input-homepage">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="toggle-row">
                <span class="toggle-label">Â©ï¸ ç‰ˆæƒ Copyright</span>
                <label class="switch">
                    <input type="checkbox" id="input-copyright">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
      </div>

      <!-- Section 3: Visuals -->
      <div class="section">
        <div class="section-title"><span>Visuals</span></div>

        <div class="toggle-group">
            <div class="toggle-row" id="row-neon">
                <span class="toggle-label">âœ¨ æµå…‰ç‰¹æ•ˆ Neon</span>
                <label class="switch">
                    <input type="checkbox" id="input-neon">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="sub-control-row" id="row-flow-type">
                <span class="toggle-label" style="font-size:12px; opacity:0.8;">æ ·å¼ Style</span>
                <select id="input-flow-type" class="form-control" style="width: 120px; padding: 4px; height: auto; font-size:12px;">
                    <option value="beam">âš¡ Beam</option>
                    <option value="glow">ğŸŒŸ Glow</option>
                </select>
            </div>
        </div>

        <div class="color-grid">
            <!-- Color 1 -->
            <div class="color-card" id="card-color-1">
                <div class="color-preview">
                    <input type="color" id="color-picker-1">
                </div>
                <div class="color-info">
                    <span>Primary</span>
                    <span id="val-color1">#8BC34A</span>
                </div>
            </div>

            <!-- Color 2 -->
            <div class="color-card" id="card-color-2">
                <div class="color-preview">
                    <input type="color" id="color-picker-2">
                </div>
                <div class="color-info">
                    <span>Accent</span>
                    <span id="val-color2">#9C6ADE</span>
                </div>
            </div>

            <button class="reset-btn" id="btn-reset-colors">â†º Reset Defaults</button>
        </div>
        
        <!-- CSS Template Copy Buttons -->
        <div class="section-title" style="margin-top: 16px;"><span>CSS Templates</span></div>
        <div class="css-copy-group">
            <button class="copy-css-btn" id="btn-copy-css" data-css="laplace-cyberpunk.css">
                ğŸŒŠ Liquid Cyber (ç»ç’ƒå¡ç‰‡)
            </button>
            <button class="copy-css-btn" id="btn-copy-css-stroke" data-css="theme-cyberpunk-sui.css">
                âš¡ Cyber Stroke (éœ“è™¹æè¾¹)
            </button>
        </div>
      </div>

    </div>

    <!-- Footer -->
    <div class="panel-footer">
      <div id="url-text" class="url-container" title="Browser Source URL">...</div>
      
      <button class="btn btn-primary" id="btn-copy">
        ğŸ“„ å¤åˆ¶ OBS é“¾æ¥ (URL)
      </button>
      
      <button class="btn btn-secondary" id="btn-open">
        ğŸ”— Open Fullscreen
      </button>

      <div class="footer-links">
        <a href="https://github.com/zhui-zi/obsliveoverlay" target="_blank" rel="noopener noreferrer">
          <svg height="16" width="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          GitHub
        </a>
        <span class="footer-separator">â€¢</span>
        <span class="license-text">MIT License Â© 2026 é»‘å·å¯å¤ª</span>
      </div>
    </div>
  </aside>

  <!-- Preview -->
  <main class="preview-area" id="preview-area">
    <div class="preview-badge">ğŸ”´ LIVE PREVIEW</div>
    <div class="preview-container" id="preview-container">
      <iframe id="preview-frame" src="overlay.html" scrolling="no"></iframe>
    </div>
  </main>

  <!-- Notification -->
  <div id="toast" class="toast">Message</div>

  <script type="module" src="src/scripts/config.js"></script>
  <script>
    // Handle all CSS copy buttons
    document.querySelectorAll('.copy-css-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const cssFile = this.dataset.css;
            if (!cssFile) return;
            
            // Simple heuristic: If file protocol, we need to go into public/
            // If http (Vite), public files are served at root.
            let path = cssFile;
            if (window.location.protocol === 'file:') {
                path = 'public/' + cssFile;
            }
            
            const fullUrl = new URL(path, window.location.href).href;
            
            navigator.clipboard.writeText(fullUrl).then(() => {
                showToast('âœ… ' + cssFile + ' å·²å¤åˆ¶');
            }).catch(err => {
                // Fallback
                const ta = document.createElement('textarea');
                ta.value = fullUrl;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                showToast('âœ… ' + cssFile + ' å·²å¤åˆ¶');
            });
        });
    });

    function showToast(msg) {
        const el = document.getElementById('toast');
        if(el) {
            el.textContent = msg;
            el.classList.add('show');
            setTimeout(() => el.classList.remove('show'), 2000);
        } else {
            alert(msg);
        }
    }
  </script>
</body>
</html>
